#!/bin/bash

if [ $# -ne 1 ]; then
    echo "$0 <PID>"
    echo
    exit 1
fi

pid=$1
cd /proc/$pid/task/

while [ 1 ]
do
    clear
    echo "$pid"
    echo "------------------------"
    find . -name 'status' | xargs grep "State" | sed 's/[\./]/ /g' | awk '{printf "%s: %s %s\n", $1, $3, $4}'
    sleep 1
done
